{"version":3,"file":"index.BvkgUr1X.js","sources":["../../../src/assets/useer.svg","../../../src/pages/Home/data.ts","../../../src/pages/Home/index.tsx","../../../src/assets/xmsImg.svg"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20t='1737883886546'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='24110'%20width='200'%20height='200'%3e%3cpath%20d='M512%20512m-512%200a512%20512%200%201%200%201024%200%20512%20512%200%201%200-1024%200Z'%20fill='%23EFEFEF'%20p-id='24111'%3e%3c/path%3e%3cpath%20d='M444.842667%20213.845333l-8.405334%200.384a74.154667%2074.154667%200%200%200-16.512%202.133334c-16.256%204.224-25.514667%2015.104-28.032%2027.818666l-0.682666%205.034667c-0.213333%203.242667%200%206.357333%200.554666%209.386667l0.512%202.090666-2.346666%202.005334c-18.218667%2015.488-35.072%2038.698667-36.522667%2068.352l-1.28%208.405333a304.469333%20304.469333%200%200%200%201.066667%2071.722667l0.682666%204.181333-1.877333%202.218667a40.576%2040.576%200%200%200-8.576%2026.453333c0.938667%2019.029333%207.082667%2042.965333%2022.954667%2065.28l3.498666%204.650667c2.432%203.072%205.248%206.357333%209.557334%2011.093333l3.498666%203.925333c27.008%2029.738667%2037.248%2046.805333%2039.936%2076.501334l0.64%208.618666%200.213334%207.424%200.512-0.298666c-5.461333%203.285333-15.402667%207.125333-30.805334%2011.093333a358.144%20358.144%200%200%201-19.328%204.352l-9.984%201.834667a370.901333%20370.901333%200%200%201-13.866666%202.176c-31.146667%205.248-57.514667%2014.592-78.762667%2027.989333a128.64%20128.64%200%200%200-42.410667%2042.496c-12.629333%2021.162667-16.469333%2041.685333-15.616%2057.642667l-0.042666%2012.757333c0%2016.213333%2013.312%2029.098667%2029.44%2029.098667h538.197333c16.170667%200%2029.44-12.928%2029.44-29.098667V768c1.024-14.848-2.602667-35.2-15.146667-56.192a128.426667%20128.426667%200%200%200-42.325333-42.453333c-21.248-13.44-47.786667-22.997333-79.232-28.629334l-9.728-1.493333-4.266667-0.725333a389.162667%20389.162667%200%200%201-29.098666-6.144l-6.058667-1.621334a111.957333%20111.957333%200%200%201-24.448-9.216v-1.365333c0-3.2%200.256-8.064%200.853333-14.677333%202.474667-27.392%2011.434667-44.074667%2034.005334-69.845334l14.933333-16.768a124.288%20124.288%200%200%200%2030.506667-74.666666c0-6.101333-0.64-10.88-2.133334-15.488l-1.450666-3.84a43.477333%2043.477333%200%200%200-6.485334-10.368l1.28-9.728a258.56%20258.56%200%200%200%201.109334-13.824%20289.28%20289.28%200%200%200-1.109334-52.778667l-1.493333-9.813333a100.992%20100.992%200%200%200-2.901333-13.781334%20113.578667%20113.578667%200%200%200-23.210667-44.928c-22.784-24.789333-73.6-49.152-160.682667-55.637333a310.741333%20310.741333%200%200%200-38.570666-0.170667z'%20fill='%234A4A4A'%20p-id='24112'%3e%3c/path%3e%3c/svg%3e\"","import React from 'react';\nimport { IRouterResponse } from '@/service/userService/userServiceType.ts';\nexport interface IMenuItem {\n  id: string;\n  label: string;\n  icon?: React.ReactNode;\n  path?: string;\n  children?: IMenuItem[];\n}\n\nexport const convertToMenuItems = (items: IRouterResponse[]): IMenuItem[] =>\n  items.map((item) => {\n    return {\n      id: item.id,\n      label: item.label,\n      path: item.path,\n      children: item.children ? convertToMenuItems(item.children) : undefined,\n    };\n  });\n","import React, { useEffect, useState } from 'react';\nimport type { MenuProps } from 'antd';\nimport { Input, Layout, Menu } from 'antd';\nimport { Link, Outlet, useLocation } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport userImg from '@/assets/useer.svg';\nimport xmsImg from '@/assets/xmsImg.svg';\nimport { IStoreProps } from '@/models/types';\nimport { convertToMenuItems, IMenuItem } from './data.ts';\n\nimport './index.scss';\n\nconst { Header, Content, Sider } = Layout;\n\nconst formatMenuItems = (items: IMenuItem[]): MenuProps['items'] => {\n  if (!items || items.length === 0) return [];\n  return items.map((item) => {\n    return {\n      key: item.id,\n      label: item.path ? <Link to={item.path}>{item.label}</Link> : item.label,\n      icon: item.icon,\n      children: item.children ? formatMenuItems(item.children) : undefined,\n    };\n  });\n};\n\nconst Home: React.FC = () => {\n  const location = useLocation();\n  const routersData = useSelector((state: IStoreProps) => state.routersData);\n  const userinfo = useSelector((state: IStoreProps) => state.userinfo);\n\n  const [searchText, setSearchText] = useState<string>('');\n  const [menuData, setmenuData] = useState<IMenuItem[]>([]);\n\n  const getMenuData = async () => {\n    setmenuData(convertToMenuItems(routersData?.routerList || []));\n  };\n\n  useEffect(() => {\n    getMenuData();\n  }, []);\n\n  // 根据搜索文本过滤菜单\n  const filterMenu = (items: IMenuItem[]): IMenuItem[] => {\n    if (items.length === 0 || !items) return [];\n    return items.filter((item) => {\n      const match = item.label.toLowerCase().includes(searchText.toLowerCase());\n      if (item.children) {\n        const childMatch = filterMenu(item.children);\n        return childMatch.length > 0 || match;\n      }\n      return match;\n    });\n  };\n\n  const getSelectedKeys = () =>\n    menuData\n      .flatMap(getAllPaths)\n      .filter((p) => p.path === location.pathname)\n      .map((p) => p.id);\n\n  // 递归获取所有路径\n  const getAllPaths = (item: IMenuItem): Array<{ id: string; path: string }> => {\n    if (item.path) return [{ id: item.id, path: item.path }];\n    return item.children?.flatMap(getAllPaths) || [];\n  };\n\n  return (\n    <div className='asp-comprehension-home'>\n      <Layout style={{ height: '100%', width: '100%' }}>\n        <Sider collapsedWidth='0' width={220} theme='light'>\n          <div className='asp-comprehension-home-menu'>\n            <div className='asp-comprehension-home-menu-logo'>\n              <img src={xmsImg} alt='' />\n              <span className='asp-comprehension-home-menu-logo-title'>售后管理系统</span>\n            </div>\n            <div className='asp-comprehension-home-menu-search'>\n              <Input\n                variant='filled'\n                placeholder='搜索'\n                allowClear\n                onChange={(e) => setSearchText(e.target.value)}\n              />\n            </div>\n            <div className='asp-comprehension-home-menu-content'>\n              <Menu\n                theme='light'\n                mode='inline'\n                selectedKeys={getSelectedKeys()}\n                items={formatMenuItems(filterMenu(menuData))}\n                defaultOpenKeys={menuData.map((item) => item.id)}\n              />\n            </div>\n          </div>\n        </Sider>\n\n        <Layout>\n          <Header className='asp-comprehension-home-header'>\n            <div className='asp-comprehension-home-header-content'>\n              <div className='asp-comprehension-home-header-content-user'>\n                <img src={userImg} alt='' />\n                <div>{userinfo.name}</div>\n              </div>\n            </div>\n          </Header>\n          <Content>\n            <div className='asp-comprehension-home-content'>\n              <Outlet />\n            </div>\n          </Content>\n        </Layout>\n      </Layout>\n    </div>\n  );\n};\n\nexport default Home;\n","export default \"data:image/svg+xml,%3csvg%20t='1737884521243'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='58228'%20width='200'%20height='200'%3e%3cpath%20d='M512%2028.444444L56.888889%20270.222222v483.555556L512%20995.555556l455.111111-241.777778v-483.555556L512%2028.444444z%20m227.555556%20343.608889v185.457778h-273.066667v-91.022222h182.044444v-91.022222h-273.066666v273.066666H739.555556V739.555556H284.444444V284.444444h455.111112v87.608889z'%20fill='%23ffffff'%20p-id='58229'%3e%3c/path%3e%3c/svg%3e\""],"names":["convertToMenuItems","items","map","item","id","label","path","children","Header","Content","Sider","Layout","formatMenuItems","length","key","jsx","Link","to","icon","Home","location","useLocation","routersData","useSelector","state","userinfo","searchText","setSearchText","useState","menuData","setmenuData","useEffect","async","routerList","getMenuData","filterMenu","filter","match","toLowerCase","includes","getAllPaths","_a","flatMap","className","style","height","width","collapsedWidth","theme","jsxs","src","alt","jsxRuntimeExports","Input","variant","placeholder","allowClear","onChange","e","target","value","Menu","mode","selectedKeys","p","pathname","defaultOpenKeys","name","Outlet"],"mappings":"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"}